<div class="dashboard-container">
  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-content">
      <div class="title-section">
        <h1>Inventory Management</h1>
        <p class="subtitle">Track and manage your product inventory</p>
      </div>
      <div class="header-actions">
        <button mat-icon-button (click)="refreshProducts()" matTooltip="Refresh">
          <mat-icon>refresh</mat-icon>
        </button>
        <button mat-flat-button color="primary" (click)="openCreateModal()">
          <mat-icon>add</mat-icon>
          Add Product
        </button>
      </div>
    </div>
  </header>

  <!-- Stats Cards -->
  <section class="stats-section">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon total">
          <mat-icon>inventory_2</mat-icon>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ stats().total }}</span>
          <span class="stat-label">Total Products</span>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon critical">
          <mat-icon>error</mat-icon>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ stats().critical }}</span>
          <span class="stat-label">Critical Stock</span>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon low">
          <mat-icon>warning</mat-icon>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ stats().low }}</span>
          <span class="stat-label">Low Stock</span>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon sufficient">
          <mat-icon>check_circle</mat-icon>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ stats().sufficient }}</span>
          <span class="stat-label">In Stock</span>
        </div>
      </div>
      
      <div class="stat-card wide">
        <div class="stat-icon value">
          <mat-icon>attach_money</mat-icon>
        </div>
        <div class="stat-content">
          <span class="stat-value">{{ stats().totalValue | currency }}</span>
          <span class="stat-label">Total Inventory Value</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Charts removed to keep app simple -->

  <!-- Filter Bar -->
  <app-filter-bar 
    [currentFilter]="filter()"
    (filterChange)="onFilterChange($event)">
  </app-filter-bar>

 

  <!-- Error State -->
  @if (error()) {
    <div class="error-container">
      <mat-icon>error_outline</mat-icon>
      <p>{{ error() }}</p>
      <button mat-flat-button color="primary" (click)="refreshProducts()">
        Try Again
      </button>
    </div>
  }

  <!-- Products Grid -->
  @if (!loading() && !error()) {
    <section class="products-section">
      @if (filteredProducts().length === 0) {
        <div class="empty-state">
          <mat-icon>inventory</mat-icon>
          <h3>No products found</h3>
          <p>Try adjusting your filters or add a new product</p>
          <button mat-flat-button color="primary" (click)="openCreateModal()">
            <mat-icon>add</mat-icon>
            Add Product
          </button>
        </div>
      } @else {
        <!-- Products Count -->
        <div class="products-header">
          <div class="products-count">
            <mat-icon>grid_view</mat-icon>
            <span>Showing {{ filteredProducts().length }} products</span>
          </div>
        </div>
        
        <div class="products-grid">
          @for (product of filteredProducts(); track product.id) {
            <app-product-card
              [product]="product"
              (edit)="openEditModal($event)"
              (delete)="deleteProduct($event)">
            </app-product-card>
          }
        </div>
      }
    </section>
  }
</div>
