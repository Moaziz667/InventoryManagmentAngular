<mat-card class="product-card" [class.critical]="stockStatus === 'critical'">
  <!-- Product Image -->
  <div class="product-image-container">
    @if (product.imageUrl) {
      <img [src]="product.imageUrl" [alt]="product.name" class="product-image" loading="lazy">
    } @else {
      <div class="product-image-placeholder">
        <mat-icon>inventory_2</mat-icon>
      </div>
    }
    <div class="image-overlay">
      <div [class]="stockBadgeClass">
        @if (stockStatus === 'critical') {
          <mat-icon>error</mat-icon>
        } @else if (stockStatus === 'low') {
          <mat-icon>warning</mat-icon>
        } @else {
          <mat-icon>check_circle</mat-icon>
        }
        {{ stockLabel }}
      </div>
    </div>
  </div>

  <div class="card-header">
    <div class="category-badge">{{ product.category }}</div>
  </div>
  
  <mat-card-content>
    <a [routerLink]="['/products', product.id]" class="product-link">
      <h3 class="product-name">{{ product.name }}</h3>
    </a>
    <p class="product-sku">SKU: {{ product.sku }}</p>
    
    <div class="product-details">
      <div class="detail-row">
        <span class="detail-label">Quantity</span>
        <span class="detail-value quantity" [class]="stockStatus">{{ product.quantity }}</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Min Stock</span>
        <span class="detail-value">{{ product.minStock }}</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Price</span>
        <span class="detail-value">{{ product.price | currency }}</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Value</span>
        <span class="detail-value">{{ product.price * product.quantity | currency }}</span>
      </div>
    </div>
    
    @if (product.description) {
      <div class="product-notes">
        <mat-icon>notes</mat-icon>
        <span>{{ product.description }}</span>
      </div>
    }
  </mat-card-content>
  
  <mat-card-actions align="end">
    <a mat-button [routerLink]="['/products', product.id]" matTooltip="View details">
      <mat-icon>visibility</mat-icon>
      View
    </a>
    <button mat-button color="primary" (click)="onEdit()" matTooltip="Edit product">
      <mat-icon>edit</mat-icon>
      Edit
    </button>
    <button mat-button color="warn" (click)="onDelete()" matTooltip="Delete product">
      <mat-icon>delete</mat-icon>
      Delete
    </button>
  </mat-card-actions>
</mat-card>
