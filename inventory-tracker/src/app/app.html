@if (isAuthenticated()) {
  <div class="app-container">
    <!-- PRO Navigation -->
    <nav class="app-nav">
      <div class="nav-left">
        <a routerLink="/" class="nav-brand">
          <div class="brand-icon">
            <mat-icon>inventory_2</mat-icon>
          </div>
          <div class="brand-text">
            <span class="brand-name">InvenTrack</span>
            <span class="brand-tag">PRO</span>
          </div>
        </a>
        
        <div class="nav-links">
          <a mat-button routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">
            <mat-icon>dashboard</mat-icon>
            Dashboard
          </a>
          <a mat-button routerLink="/history" routerLinkActive="active">
            <mat-icon>timeline</mat-icon>
            Activity
          </a>
        </div>
      </div>
      
      <div class="nav-center">
        <div class="search-bar">
          <mat-icon>search</mat-icon>
          <input type="text" placeholder="Search products... (Ctrl+F)" readonly (click)="focusDashboardSearch()">
          <div class="search-shortcut">
            <kbd>Ctrl</kbd>
            <span>+</span>
            <kbd>F</kbd>
          </div>
        </div>
      </div>
      
      <div class="nav-right">
        <!-- Keyboard Shortcuts Help -->
        <button mat-icon-button [matMenuTriggerFor]="shortcutsMenu" matTooltip="Keyboard Shortcuts" class="nav-icon-btn">
          <mat-icon>keyboard</mat-icon>
        </button>
        <mat-menu #shortcutsMenu="matMenu" class="shortcuts-menu">
          <div class="shortcuts-header">
            <mat-icon>keyboard</mat-icon>
            <span>Keyboard Shortcuts</span>
          </div>
          <mat-divider></mat-divider>
          <div class="shortcuts-list">
            <div class="shortcut-item">
              <span class="shortcut-desc">Search Products</span>
              <div class="shortcut-keys">
                <kbd>Ctrl</kbd><span>+</span><kbd>F</kbd>
              </div>
            </div>
            <div class="shortcut-item">
              <span class="shortcut-desc">Refresh Data</span>
              <div class="shortcut-keys">
                <kbd>Ctrl</kbd><span>+</span><kbd>R</kbd>
              </div>
            </div>
            <div class="shortcut-item">
              <span class="shortcut-desc">Close Dialog</span>
              <div class="shortcut-keys">
                <kbd>Esc</kbd>
              </div>
            </div>
          </div>
        </mat-menu>
        
        <!-- Notifications -->
        <button mat-icon-button [matMenuTriggerFor]="notificationMenu" matTooltip="Notifications" class="nav-icon-btn notification-btn">
          <mat-icon [matBadge]="notificationCount()" matBadgeColor="warn" [matBadgeHidden]="notificationCount() === 0">
            notifications
          </mat-icon>
        </button>
        <mat-menu #notificationMenu="matMenu" class="notification-menu">
          <div class="notification-header">
            <span>Notifications</span>
            @if (notificationCount() > 0) {
              <button mat-button class="mark-read-btn" (click)="$event.stopPropagation(); clearNotifications()">Mark all read</button>
            }
          </div>
          <mat-divider></mat-divider>
          @if (notifications().length === 0) {
            <div class="notification-empty">
              <mat-icon>notifications_none</mat-icon>
              <span>No new notifications</span>
            </div>
          } @else {
            @for (notification of notifications(); track notification.id) {
              <button mat-menu-item class="notification-item">
                <mat-icon [class]="notification.type">{{ notification.icon }}</mat-icon>
                <div class="notification-content">
                  <span class="notification-title">{{ notification.title }}</span>
                  <span class="notification-time">{{ notification.time }}</span>
                </div>
              </button>
            }
          }
        </mat-menu>
        
        <!-- User Menu -->
        <button mat-button [matMenuTriggerFor]="userMenu" class="user-menu-btn">
          <div class="user-avatar">
            <mat-icon>person</mat-icon>
          </div>
          <div class="user-details">
            <span class="user-name">{{ currentUser()?.name }}</span>
            <span class="user-role">Administrator</span>
          </div>
          <mat-icon class="dropdown-icon">expand_more</mat-icon>
        </button>
        <mat-menu #userMenu="matMenu" class="user-menu-dropdown">
          <div class="user-menu-header">
            <div class="user-avatar-large">
              <mat-icon>person</mat-icon>
            </div>
            <div class="user-info">
              <span class="name">{{ currentUser()?.name }}</span>
              <span class="email">{{ currentUser()?.email }}</span>
              <span class="role-badge">Admin</span>
            </div>
          </div>
          <mat-divider></mat-divider>
          <button mat-menu-item routerLink="/help">
            <mat-icon>help_outline</mat-icon>
            <span>Help & Support</span>
          </button>
          <mat-divider></mat-divider>
          <button mat-menu-item (click)="logout()" class="logout-btn">
            <mat-icon>logout</mat-icon>
            <span>Logout</span>
          </button>
        </mat-menu>
      </div>
    </nav>

    <!-- Main Content with Animation -->
    <main class="app-main" [@routeAnimations]="getRouteAnimationData()">
      <router-outlet></router-outlet>
    </main>

    <!-- PRO Footer -->
    <footer class="app-footer">
      <div class="footer-content">
        <div class="footer-section brand-section">
          <div class="footer-brand">
            <mat-icon>inventory_2</mat-icon>
            <span>InvenTrack</span>
          </div>
          <p class="footer-tagline">Professional inventory management for modern businesses</p>
          <div class="footer-social">
            <a href="#" mat-icon-button matTooltip="GitHub">
              <mat-icon>code</mat-icon>
            </a>
            <a href="#" mat-icon-button matTooltip="Documentation">
              <mat-icon>description</mat-icon>
            </a>
            <a href="#" mat-icon-button matTooltip="Contact">
              <mat-icon>mail</mat-icon>
            </a>
          </div>
        </div>
        
        <div class="footer-section links-section">
          <h4>Quick Links</h4>
          <a routerLink="/">Dashboard</a>
          <a routerLink="/history">Stock History</a>
          <a href="#">Reports</a>
          <a href="#">Analytics</a>
        </div>
        
        <div class="footer-section shortcuts-section">
          <h4>Shortcuts</h4>
          <div class="footer-shortcut">
            <kbd>Ctrl</kbd>+<kbd>F</kbd>
            <span>Search</span>
          </div>
          <div class="footer-shortcut">
            <kbd>Ctrl</kbd>+<kbd>R</kbd>
            <span>Refresh</span>
          </div>
          <div class="footer-shortcut">
            <kbd>Esc</kbd>
            <span>Close Dialog</span>
          </div>
        </div>
        
        <div class="footer-section info-section">
          <h4>System Info</h4>
          <div class="info-item">
            <mat-icon>verified</mat-icon>
            <span>Version 2.0.0</span>
          </div>
          <div class="info-item">
            <mat-icon>update</mat-icon>
            <span>Last Updated: Today</span>
          </div>
          <div class="info-item">
            <mat-icon>security</mat-icon>
            <span>Secure Connection</span>
          </div>
        </div>
      </div>
      
      <div class="footer-bottom">
        <div class="footer-bottom-content">
          <p>&copy; {{ currentYear }} InvenTrack. Built with Angular & Material Design</p>
          <div class="footer-tech">
            <span>Powered by</span>
            <img src="https://angular.io/assets/images/logos/angular/angular.svg" alt="Angular" class="tech-logo">
            <span>Angular</span>
          </div>
        </div>
      </div>
    </footer>
  </div>
} @else {
  <div class="auth-wrapper" [@routeAnimations]="getRouteAnimationData()">
    <router-outlet></router-outlet>
  </div>
}
